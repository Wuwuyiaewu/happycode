<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="./js/vue.js"></script>
    <script src="./js/axios.js"></script>
    <title>websocket_發送</title>
</head>

<body>
    <div id="app">
        <button @click="gotourl()">點我觸發動作</button>
        <br>
        <input type="text" placeholder="輸入帳號" :value="ax_data.data.login_name">
        <input type="text" placeholder="輸入密碼" :value="ax_data.data.password">
        <select>
            <option v-for="list in ax_data.data.accountType" :value="list.val">{{list.name}}</option>
        </select>
    </div>

    <script>
        let account_type = {
            selected:"請選擇模式",
            account_value: [
                {
                    "name": "真實帳號",
                    "val": "real"
                },
                {
                    "name": "模擬帳號",
                    "val": "demo"
                }
            ]
        }
        var vm = new Vue({
            el: "#app",
            data() {
                return {
                    ax_data: {
                        "head": { "appKey": "yz352001" },
                        "data": { "login_name": "", "password": "", "accountType": account_type.account_value }
                    },
                    config: {
                        method: 'post',
                        url: 'https://api.dragonfly8.com/account/appProperties/getAccountProperties',
                        headers: {
                            'Content-type': 'application/json',
                            'module': 'uat-account',
                            'rpcType': 'http',
                            'method': '/account/appProperties/getAccountProperties',
                            'httpMethod': 'post',
                            'trace': 'h5_' + this.get_current_time(),
                            'Authorization': ''
                        },

                        data: {
                            "head": { "appKey": "yz352001" },
                            "data": { "login_name": "", "password": "" }
                        },
                    },
                    content: {
                        "company_id": "",
                        "login_name": "",
                        "password": "",
                        "user_type": -1,
                        "appKey": "",
                        "clientIp": ""
                    },
                    view: "",
                    view2: ""
                }
            },
            methods: {
                get_current_time() {
                    var d = new Date();
                    return d.getTime();
                },
                gotourl() {
                    let vm = this
                    console.log(vm.config);
                    axios(vm.config)
                        .then(function (response) {
                            vm.config.headers.Authorization = response.headers.authorization
                            vm.config.data = vm.ax_data
                            console.log(response)
                            return axios(vm.config)
                        })
                        .then((res2) => {
                            vm.view2 = res2
                        })
                        .catch(function (error) {
                            console.log(error, '第二次錯誤');
                        });
                }
            },
            mounted() {
            },
            created() {
            },
            destroyed() {
            }
        })

    </script>

    <script>

    </script>

</body>

</html>