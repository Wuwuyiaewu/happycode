<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="./js/vue.js"></script>
    <title>RE_vue_S1E9</title>
</head>

<body>
    <div id="app">
        <component-input-inner @send="get_input_text"></component-input-inner>
        <component-filter :status=show @change_status="change_status"></component-filter>
        <component-list :list=computed_list_filter></component-list>
    </div>

    <script>
        Vue.component('component-filter', {
            props: ['status'],
            data: function() {
                return {
                    button: [{
                        text: '完成',
                        status: "完成"
                    }, {
                        text: '未完成',
                        status: "未完成"
                    }, {
                        text: '全部',
                        status: "all"
                    }]
                }
            },
            template: `
            <div>
                <button @click="change('完成')">完成</button>
                <button @click="change('未完成')">未完成</button>
                <button @click="change('全部')">全部</button>
                </div>`,
            computed: {},
            watch: {},
            methods: {
                change(val) {
                    this.$emit("change_status", val)
                }
            }
        });
        Vue.component('component-list', {
            props: ['list'],
            data: function() {
                return {}
            },
            template: `<div>
                <template v-if="edit_text === item.content">
                    <ul>
                    <li v-for="item of list" :key="item.time">{{item.content}}</li>
                    <input type="checkbox" @complected="">
                    </ul>   
                    </template>
                <template v-else>
                    <ul>
                    <li v-for="item of list" :key="item.time">{{item.content}}</li>
                    <button @click="edit_text">修改</button>
                    <button>刪除</button>
                    </ul>    
                    </template>
                </div>`,
            computed: {},
            watch: {},
            methods: {
                edit_text() {

                }
            }
        });
        Vue.component('component-input-inner', {
            template: `<div>
                <input type="text" @input="custom_input" v-model="input_text" @keyup.enter="gogogo">
                </div>`,
            data: function() {
                return {
                    input_text: ""
                }
            },
            methods: {
                gogogo() {
                    this.$emit('send', this.input_text)
                    this.input_text = ""
                },
                custom_input(value) {
                    this.input_text = value.target.value
                }
            }
        });
        (function VueInit() {
            var vm = new Vue({
                el: "#app",
                data() {
                    return {
                        list: [],
                        show: '完成'
                    }
                },
                methods: {
                    get_input_text(val) {
                        let item = {
                            status: false,
                            time: new Date().getTime(),
                            content: val
                        }
                        this.list.push(item)
                    },
                    change_status(val) {
                        this.show = val
                    }
                },
                computed: {
                    computed_list_filter() {
                        if (this.show === '完成') {
                            this.list.filter(el => {
                                return el.status === true
                            })
                        } else if (this.show === '未完成') {
                            this.list.filter(el => {
                                return el.status === false
                            })
                        } else {
                            return this.list
                        }
                    }
                },
                watch: {},
                mounted() {},
                created() {},
                destroyed() {}
            })
        })()
    </script>

</body>

</html>